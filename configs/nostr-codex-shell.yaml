# Example: Nostr + Codex + shell/fs actions
relays:
  - wss://relay.damus.io
  - wss://relay.snort.social
  - wss://relay.nostr.band

runner:
  private_key: ""
  allowed_pubkeys:
    - ""
  auto_reply: true
  max_reply_chars: 8000
  session_timeout_minutes: 240
  initial_prompt: |
    You are an AI agent with shell access to this machine via Codex. Be concise and careful.
  profile_name: "buddy"
  profile_image: "https://raw.githubusercontent.com/joelklabo/buddy/main/assets/social-preview.svg"

codex:
  binary: "/opt/homebrew/bin/codex"
  sandbox: "danger-full-access"
  approval: "never"
  profile: ""
  working_dir: "~"
  extra_args:
    - "--dangerously-bypass-approvals-and-sandbox"
  skip_git_repo_check: true
  timeout_seconds: 900

storage:
  path: "~/.nostr-codex/state.db"

logging:
  level: "info"
  file: "~/.nostr-codex/runner.log"

transports:
  - type: "nostr"
    id: "nostr"
    relays:
      - wss://relay.damus.io
      - wss://relay.snort.social
      - wss://relay.nostr.band
    private_key: ""
    allowed_pubkeys:
      - ""

agent:
  type: "codexcli"
  codex:
    binary: "/opt/homebrew/bin/codex"
    sandbox: "danger-full-access"
    approval: "never"
    profile: ""
    working_dir: "~"
    extra_args:
      - "--dangerously-bypass-approvals-and-sandbox"
    skip_git_repo_check: true
    timeout_seconds: 900

actions:
  - type: "shell"
    name: "shell"
    workdir: "~"
    allowed: []
    timeout_seconds: 120
    max_output: 8000
  - type: "readfile"
    name: "readfile"
    roots:
      - "."
  - type: "writefile"
    name: "writefile"
    roots:
      - "."
    allow_write: false
